{% extends "layout.html" %}

{% block title %}Employer Dashboard{% endblock %}

{% block content %}
<div style="display: flex; height: 100vh; gap: 10px; padding: 10px;">

    <!-- Left Panel: Positions -->
    <div style="flex: 5; display: flex; flex-direction: column;">
        <h5 style="margin-bottom: 10px;">Positions</h5>
        <div style="border: 2px solid purple; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 10px;">
            {% if positions %}
                {% for pos in positions %}
                    <div class="card hoverable" 
                         style="padding: 10px; cursor: pointer;"
                         data-url="{{ url_for('employer_views.employer_dashboard', selected_position=pos.id) }}"
                         onclick="window.location=this.dataset.url">
                        <span class="card-title" style="font-weight: bold;">{{ pos.title }}</span>
                        <p><strong>Description:</strong> {{ pos.description }}</p>
                        <p><strong>Capacity:</strong> {{ pos.number_of_positions }}</p>
                        <p><strong>Status:</strong> {{ pos.status.value }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <p>You have not created any internship positions.</p>
            {% endif %}
        </div>
    </div>

    <!-- Right Panel: Shortlisted Applicants -->
    <div style="flex: 5; display: flex; flex-direction: column;">
        <h5 style="margin-bottom: 10px;">Shortlisted Applications</h5>
        <div style="border: 2px solid purple; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 10px;">
            {% if selected_position %}
                {% if shortlisted %}
                    {% for app in shortlisted %}
                        <div class="card hoverable" style="padding: 5px;">
                            <div class="card-content">
                                <span class="card-title" style="font-weight: bold;">{{ app.student_name }}</span>
                                <p>Status: Shortlisted</p>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>No shortlisted applicants found for this position.</p>
                {% endif %}
            {% else %}
                <p>Select a position from the left panel to view shortlisted applicants.</p>
            {% endif %}
        </div>
    </div>

</div>
{% endblock %}
